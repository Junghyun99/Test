## 모듈
앱의 전체 구성에서 어떤 주요 서비스나 모듈(예: 모바일 UI, 자동 매매 알고리즘 엔진, 데이터베이스 관리, 외부 API 연동 모듈 등)이 포함되나요?
-> 증권사 API 연동 모듈, 데이터베이스 관리 모듈, 매직스플릿 알고리즘 모듈, 모바일 UI 뷰


### 모바일 UI
- 모바일 환경에 최적화된 화면
- 매매 조건 입력, 포트폴리오 및 거래 기록 조회
- ‘N차 A% 하락시, N+1차 매수금액 B’와 ‘N차 C% 상승시 전량 매도’ 같은 조건들을 손쉽게 설정하도록 지원
- FR: 매매 조건 설정, 포트폴리오 및 거래 내역 조회
- NFR: 사용자 친화적인 디자인과 빠른 응답 속도

### 매직스플릿 알고리즘
- 자동매매 로직
- 미보유 종목의 초기 매수 이후 지정된 조건에 따라 자동 매매 실행
- 시장가 주문
- 알고리즘 관리와 조건 체크, 거래 실행 등을 담당
- 연관 FR: 자동 매매 조건 체크, 순차적 차수 관리, 주문 실행
- NFR 측면: 실시간 처리 성능(예: 1,000종목 기준 100ms 내 응답), 확장성(병렬 처리 고려)

### DB 관리
- sqlite3 사용
- 실제 거래만 기록(증권사 API를 요청하여 체결확인 된 내용만 기록함)
- 데이터 무결성과 신뢰성 유지, 뷰에 필요한 데이터를 제공
- 연관 FR: 거래 기록 저장, 포트폴리오/잔고 관리, 과거 내역 조회
- NFR 측면: 빠른 읽기/쓰기가 가능하도록 최적화된 쿼리 및 스키마 설계

### 증권사 API
- 현재 가격, 주문, 잔고 조회 등 증권사 Rest api 사용
- 연관 FR: 주식 실시간 데이터 수신, 주문 실행 결과 수신
- NFR 측면: 안정적이고 신뢰할 수 있는 통신, API 호출 주기에 따른 성능 고려

### 스케줄러 및 작업 관리 모듈
- 정해진 주기로 매매 조건을 체크하고 거래 조건 충족시 자동 주문, 데이터 베이스 업데이트 수행
- 1000종목 기준 100ms 내 달성 목표, 필요시 병렬 혹은 스레드 고려
- 연관 FR: 실시간 거래 조건 체크, 데이터 업데이트
- NFR 측면: 빠른 처리와 확장성, 여러 종목에 대해 효과적으로 작업을 분산 처리

### 로깅 및 오류 모니터링
- 각 단계를 로그 기록
- 텍스트 로그와 팝업 알림?메시지 알림?으로 오류 인지
- 연관 FR: 거래 및 조건 체크 과정의 기록
- NFR 측면: 오류 모니터링과 빠른 알림, 시스템 장애 시 신속 복구를 위한 기본 정보 제공

### 보안 관리
- 증권사 api key 같은 민감 정보를 암호화
- AES-256 및 보안 valut 또는 환경 변수 관리 방식 적용
- 연관 FR: 민감 정보 보호
- NFR 측면: 데이터 암호화, 안전한 키 관리로 시스템 보안 강화

## 모듈간 통신
- 개인 프로젝트고 모듈 사이즈가 작기 때문에 각 모듈간의 직접 통신 방식으로 구현
- 모듈간 경계를 명확히 정의하고 인터페이스를 정리하면 필요에 따라 메시지 큐나 RESTful API 방식으로 전환할수있음

## 기술 스택

### 파이썬
- 알고리즘 구현
- 백엔드



# System Architecture Document

이 문서는 자동 주식 매매 앱의 전체 시스템 아키텍처를 설명합니다. 본 시스템은 Python 기반의 알고리즘, GitHub Actions를 이용한 주기적 스케줄링, sqlite3 데이터베이스, 그리고 GitHub Pages를 통한 모바일 UI 제공을 목표로 합니다.

---

## 1. 전체 개요

본 시스템은 다음과 같은 주요 구성 요소로 나뉩니다.

- **사용자 인터페이스(UI) 모듈:**  
  GitHub Pages를 통해 정적 웹 페이지로 제공되며, 모바일 환경에 최적화된 디자인으로 거래 내역, 포트폴리오, 잔고 등 주요 정보를 조회할 수 있습니다.

- **자동 매매 엔진(Trading Engine) 모듈:**  
  모든 자동 매매 로직(매직 스플릿 알고리즘 포함)을 Python으로 구현합니다. 여기서 주식 매매 조건 체크, 주문 실행(시장가 주문), 체결 정보 처리 등의 핵심 기능을 수행합니다.

- **데이터베이스 모듈:**  
  `sqlite3` 데이터베이스를 사용하여 거래 기록, 포트폴리오 데이터, 실시간 체결 내역 등을 저장합니다. 또한, 데이터베이스 뷰를 통해 최신 정보를 UI에 제공합니다.

- **외부 API 통합 모듈:**  
  증권사 API 및 기타 금융 데이터 API와 연동하여 실시간 주식 데이터와 주문 결과를 수집합니다. REST API 호출(주로 JSON 데이터 형식)로 통신합니다.

- **스케줄러 및 작업 관리 모듈:**  
  GitHub Actions의 Cron 스케줄러를 활용하여, 주기적으로 자동 매매 조건을 체크하고, 매수/매도 로직을 실행합니다.  
  처리 결과는 DB 업데이트 및 로그 기록 등을 통해 관리됩니다.

- **로그 및 오류 모니터링 모듈:**  
  Python의 `logging` 모듈 등을 사용하여 각 단계의 실행 결과와 오류를 텍스트 로그에 기록하며, GitHub Actions 로그를 통해 모니터링합니다.

- **보안 및 키 관리 모듈:**  
  증권사 API KEY 등 민감 정보를 안전하게 관리하기 위해 AES-256 등의 암호화 기법과 GitHub Repository의 Secrets, 환경 변수를 사용합니다.

---

## 2. 상세 구성 및 모듈 간 상호작용

### 2.1 사용자 인터페이스 (Mobile UI)
- **호스팅:**  
  - GitHub Pages에 정적 HTML/CSS/JavaScript 파일로 제공
- **주요 기능:**  
  - 거래 내역, 포트폴리오, 계좌 잔고 등 정보 조회  
  - 최신 DB 쿼리 결과를 반영하는 정적 데이터 파일 또는 API 호출 기반 뷰 제공

### 2.2 자동 매매 엔진
- **주요 로직:**  
  - 매직 스플릿 알고리즘을 포함하여, 과거 차수에 따라 매수/매도 조건을 판단
  - 조건에 따라 증권사 API (시장가 주문)를 호출하여 주문 실행
- **통신 방식:**  
  - 모듈 내부에서는 동기적 함수 호출을 주로 사용하지만, 필요한 부분은 `asyncio`를 통해 비동기 처리를 고려

### 2.3 데이터베이스 (sqlite3)
- **사용 용도:**  
  - 모든 거래 기록, 체결 내역, 포트폴리오 데이터 저장  
  - View 기능을 사용해 UI에 반영할 수 있도록 최신 데이터를 제공
- **데이터 필드 예시:**  
  - `id`, `종목이름`, `심볼`, `거래번호`, `국가`, `차수`, `체결가`, `수량`, `총 가격`, `거래상태`, `페어 id`, `거래 시간`

### 2.4 외부 API 통합 모듈
- **연동 방식:**  
  - Python의 `requests` 라이브러리를 사용하여 증권사 REST API 호출
  - 필요에 따라 웹소켓 통신을 통한 실시간 데이터 피드도 고려
- **데이터 형식:**  
  - 주로 JSON 형식으로 데이터를 송수신

### 2.5 스케줄러 및 작업 관리
- **실행 환경:**  
  - GitHub Actions를 사용한 Cron 스케줄러로 주기적 (예: 5분 혹은 10분 주기) Python 스크립트를 실행
- **주요 작업:**  
  - 자동 매매 조건 체크 및 주문 실행  
  - DB 업데이트, 로그 기록 등 처리
- **확장성:**  
  - 1,000종목 이상의 조건 체크 시, 병렬 처리/비동기 처리를 도입하여 100ms 내 완료 목표 달성

### 2.6 로그 및 오류 모니터링
- **로그 기록:**  
  - Python `logging` 모듈을 사용하여 각 실행 단계와 오류 정보를 기록  
  - GitHub Actions 로그에 저장하여 추후 디버깅 가능

### 2.7 보안 및 API KEY 관리
- **보안 적용:**  
  - 증권사 API KEY 등 민감 정보는 AES-256 암호화(예: Python의 `cryptography` 라이브러리 활용)
  - GitHub Repository Secrets 및 환경 변수로 관리하여 외부 노출 방지

---

## 3. 배포 환경 및 데이터 흐름

### 3.1 배포 및 스케줄링 방식

- **GitHub 기반 배포:**  
  - 코드 및 문서는 GitHub Repository에 저장  
  - GitHub Actions의 Cron 기능을 활용하여 정해진 주기로 Python 스크립트(자동 매매 엔진 및 스케줄러)를 실행  
  - 결과는 sqlite3 DB에 갱신되며, 이를 기반으로 정적 데이터 파일이 생성되어 GitHub Pages를 통해 UI에 반영

### 3.2 데이터 흐름 개요

다음은 전체 시스템 내 데이터의 흐름 예시입니다:
[사용자]
   │
   ▼
[모바일 UI (GitHub Pages)]
   │
   ▼
[정적 데이터 파일 혹은 API 호출]
   │
   ▼
[GitHub Repository]
   │
   ├── GitHub Actions (스케줄러)
   │       │
   │       ▼
   │  [Python 스크립트: 자동 매매 엔진]
   │       │
   │       ▼
   │  [sqlite3 데이터베이스]
   │       │
   │       ▼
   │  [증권사 REST API]


- **세부 설명:**
  - **사용자 인터페이스(UI):** 사용자는 GitHub Pages에 접속하여, 업데이트된 정적 데이터(HTML, JSON 또는 기타 형식)를 통해 최근 거래 내역과 포트폴리오 정보를 확인합니다.
  - **GitHub Actions:** 주기적으로 실행되어, Python 스크립트가 자동 매매 로직을 수행합니다.
  - **산출물:** 모든 거래 결과와 실행 로그는 sqlite3 DB에 기록되어, UI에서 실시간 조회가 가능합니다.

---

## 4. 추가 고려사항

- **확장성:**  
  - 현재 개인 프로젝트 환경이므로 단일 머신 내 실행을 목표로 하나, 모듈 간 경계를 명확히 하여 추후 RESTful API나 메시지 큐 기반 분산 처리로 전환할 수 있도록 설계합니다.

- **장애 복구:**  
  - 거래 내역은 DB에 안전하게 저장되어 있으므로, 장애 발생 시 재실행하거나 새로고침 후 다음 주기에서 자동 복구합니다.
  - 오류 발생 시, GitHub Actions 로그와 Python 로그를 통해 신속히 원인 분석하고 대응할 수 있도록 합니다.

- **보안 강화:**  
  - 민감 정보(예: API KEY)는 암호화 및 GitHub Secrets 관리 방식으로 보관하며, 데이터 무결성과 암호화된 통신을 유지합니다.

---

이와 같이, GitHub Actions를 이용한 주기적 스케줄링, Python 기반의 자동 매매 로직, sqlite3를 통한 데이터 저장, 그리고 GitHub Pages를 통한 모바일 UI 제공 방식을 통해 전체 시스템을 구성합니다. 각 모듈은 명확한 책임과 인터페이스를 갖도록 설계하여, 현재의 개인 프로젝트 환경에 맞는 안정적이고 확장 가능한 아키텍처를 목표로 합니다.