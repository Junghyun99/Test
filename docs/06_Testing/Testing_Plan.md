# Testing Plan

이 문서는 자동 주식 매매 앱의 품질 보증(QA)를 위한 테스트 전략 및 실행 계획을 설명합니다. 본 테스트 플랜은 기능적 요구사항, 성능, 보안, 그리고 UI/UX 관련 항목들을 포괄적으로 검증하기 위한 기준과 절차를 명시합니다.

---

## 1. 개요

**목적:**  
- 개발된 시스템이 specified 기능 및 비기능 요구사항(자동 매매 로직, 데이터 저장, 외부 API 연동, UI 데이터 조회 등)을 충족하는지 확인합니다.
- 시스템의 안정성, 성능, 보안 및 사용자 경험을 보장하기 위한 테스트 전략을 수립합니다.

**범위:**  
- **In-Scope:**  
    - 자동 매매 엔진(매직 스플릿 알고리즘 포함)
    - 데이터베이스 연동 및 거래 기록 저장
    - GitHub Actions 스케줄러를 통한 정기 실행
    - GitHub Pages를 통한 모바일 UI와 데이터 조회 기능
    - 외부 증권사 REST API 연동
- **Out-of-Scope:**  
    - 대규모 트래픽 환경에서의 부하 테스트 (개인 프로젝트 수준)
    - 복잡한 사용자 인증 흐름(개인 프로젝트로 제한됨)

---

## 2. 테스트 목표

- **기능 테스트:**  
  - 자동 매매 엔진이 정확하게 매매 조건을 판단하고 주문을 실행하는지 확인
  - 거래 기록 및 포트폴리오 데이터가 sqlite3 데이터베이스에 올바르게 저장되고 조회되는지 검증

- **성능 테스트:**  
  - 1,000종목에 대해 100ms 이내에 조건 체크 및 주문 실행, 데이터베이스 업데이트가 이루어지는지 확인

- **보안 테스트:**  
  - 증권사 API KEY 등 민감 정보를 암호화한 후 안전하게 관리하는지 검증

- **UI/UX 테스트:**  
  - GitHub Pages를 통해 제공되는 모바일 UI가 최신 데이터(정적 데이터 파일 또는 API 기반)를 정확하게 표시하는지 확인

---

## 3. 테스트 전략

### 3.1 단위 테스트 (Unit Testing)
- **목표:**  
  - 각 모듈(예: 자동 매매 엔진, 데이터 처리 함수, 암호화 함수 등)의 개별 기능 확인
- **도구:**  
  - Python의 `unittest` 또는 `pytest`
- **예시:**  
  - 매직 스플릿 알고리즘에서 주어진 입력(예: N차 체결가, 수량, 조건 값)을 통해 올바른 매수/매도 신호가 발생하는지 테스트

### 3.2 통합 테스트 (Integration Testing)
- **목표:**  
  - 모듈 간 인터페이스와 데이터 전송이 정상 동작하는지 확인
  - 자동 매매 엔진과 sqlite3 데이터베이스, 외부 증권사의 REST API 간의 연동 테스트
- **도구:**  
  - 모의 API (mock API) 및 테스트용 데이터베이스 환경 구축
- **예시:**  
  - 조건 충족 시, 주문 데이터가 외부 API에 정상적으로 전송되고, 그 결과가 데이터베이스에 기록되는지 테스트

### 3.3 시스템 테스트 (System Testing)
- **목표:**  
  - 전체 시스템(스케줄러, 자동 매매 엔진, UI, 데이터 업데이트 등)을 대상으로 전반적인 동작 검증
- **도구:**  
  - GitHub Actions를 통한 자동화된 테스트 스크립트, 실제 스케줄 실행 로그 분석
- **예시:**  
  - GitHub Actions의 Cron 스케줄러가 주기적으로 실행되어 전체 프로세스를 정상적으로 수행하며, UI에서 최신 거래 내역과 포트폴리오 데이터가 반영되는지 확인

### 3.4 회귀 테스트 (Regression Testing)
- **목표:**  
  - 코드 변경이나 업데이트 후 기존 기능이 정상 동작하는지 검증
- **프로세스:**  
  - 모든 단위 테스트 및 통합 테스트를 신규 변경 사항 적용 후 재실행

---

## 4. 테스트 환경

- **개발 환경:**  
  - OS: Windows 11.0  
  - Python 버전: 3.x  
  - 데이터베이스: sqlite3  
- **배포 환경:**  
  - GitHub Repository (코드 및 정적 데이터 파일 관리)
  - GitHub Actions (크론 스케줄러로 정기 실행)
  - GitHub Pages (모바일 UI 제공)
- **외부 API:**  
  - 증권사 REST API (테스트용 sandbox 또는 개발용 API 키 사용)

---

## 5. 주요 테스트 케이스 및 시나리오

### 5.1 자동 매매 엔진 테스트
- **Test Case ID:** AT-01  
- **목적:**  
  - 미보유 종목의 초기 매수 이후, 매직 스플릿 알고리즘이 지정된 조건(A, B, C, D, E)을 기반으로 매수/매도 신호를 올바르게 생성하는지 검증  
- **입력/조건:**  
  - 입력 예: N차 체결가 A, N차 수량 B, 가격 하락 비율 C, 매수액 D, 상승 비율 E  
- **기대 결과:**  
  - 조건 충족 시, 주문 실행(시장가 주문)이 발생하고 결과가 데이터베이스에 기록됨

### 5.2 데이터베이스 업데이트 테스트
- **Test Case ID:** DB-01  
- **목적:**  
  - 거래 내역, 체결 기록, 포트폴리오 데이터가 sqlite3 데이터베이스에 올바르게 저장되는지 확인  
- **입력/조건:**  
  - 가상의 주문 실행 결과 데이터를 삽입 후 조회  
- **기대 결과:**  
  - 데이터 필드(`id`, `종목이름`, `심볼`, `거래번호`, `차수`, `체결가`, 등)가 정확하게 기록됨

### 5.3 UI 데이터 표시 테스트
- **Test Case ID:** UI-01  
- **목적:**  
  - GitHub Pages로 제공되는 모바일 UI에서 최신 거래 내역과 포트폴리오 정보가 정확히 표시되는지 확인  
- **입력/조건:**  
  - 최신 정적 데이터 파일이나 API 호출 결과  
- **기대 결과:**  
  - 사용자에게 고지된 포맷에 따라 거래 내역, 포트폴리오, 손익률 등의 정보가 정확히 렌더링됨

---

## 6. 테스트 일정 및 책임

- **단위 테스트:**  
  - 모든 코드 커밋 시 자동 실행 (CI 파이프라인 내)
- **통합 테스트:**  
  - 주요 기능 변경 후 및 주간 테스트 진행
- **시스템 테스트:**  
  - GitHub Actions 실행 확인 및 주요 마일스톤 이전에 전체 시스템 테스트 수행
- **회귀 테스트:**  
  - 릴리즈 전 전체 테스트 재실행

**책임자:**  
- 테스트 케이스 설계 및 자동화: [담당자 이름/팀]
- 통합 및 시스템 테스트: [담당자 이름/팀]
- 버그 추적 및 보고: GitHub Issues를 통해 진행

---

## 7. 버그 추적 및 보고

- **도구:**  
  - GitHub Issues, Slack (알림용)
- **프로세스:**  
  - 테스트 실패 시 버그 이슈 생성, 문제 재현 및 수정 후 재테스트
- **보고 주기:**  
  - 매주 테스트 진행 상황 리뷰 및 주요 이슈 보고

---

## 8. 결론

본 테스트 플랜은 자동 주식 매매 시스템이 안정적이고, 효율적이며, 보안 요건을 충족하는지 확인하기 위한 전반적인 전략, 환경 및 케이스를 명시합니다. 모든 테스트 결과는 Testing Report로 기록하여 향후 개선 사항 및 유지보수 계획에 반영합니다.